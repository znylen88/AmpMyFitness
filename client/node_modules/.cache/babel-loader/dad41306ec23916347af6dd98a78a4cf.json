{"ast":null,"code":"import _classCallCheck from \"/Users/z/Desktop/AMPY/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/z/Desktop/AMPY/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/z/Desktop/AMPY/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/z/Desktop/AMPY/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/z/Desktop/AMPY/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/z/Desktop/AMPY/client/src/pages/SignUpPage.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SignUpForm from '../components/SignUpForm.jsx';\nimport API from '../utils/API';\n\nvar SignUpPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(SignUpPage, _React$Component);\n\n  function SignUpPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignUpPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignUpPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      errors: {},\n      user: {\n        email: '',\n        name: '',\n        password: ''\n      }\n    };\n\n    _this.processForm = function (event) {\n      // prevent default action. in this case, action is the form submission event\n      event.preventDefault(); // create a string for an HTTP body message\n\n      var _this$state$user = _this.state.user,\n          name = _this$state$user.name,\n          email = _this$state$user.email,\n          password = _this$state$user.password; //const formData = `email=${email}&password=${password}`;\n\n      API.signUp({\n        name: name,\n        email: email,\n        password: password\n      }).then(function (res) {\n        // change the component-container state\n        // set a message\n        localStorage.setItem('successMessage', res.data.message); // redirect user after sign up to login page\n\n        _this.props.history.push('/login');\n\n        _this.setState({\n          errors: {}\n        });\n      }).catch(function (_ref) {\n        var response = _ref.response;\n        var errors = response.data.errors ? response.data.errors : {};\n        errors.summary = response.data.message;\n\n        _this.setState({\n          errors: errors\n        });\n      });\n    };\n\n    _this.changeUser = function (event) {\n      var field = event.target.name;\n      var user = _this.state.user;\n      user[field] = event.target.value;\n\n      _this.setState({\n        user: user\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SignUpPage, [{\n    key: \"render\",\n\n    /**\n     * Render the component.\n     */\n    value: function render() {\n      return React.createElement(SignUpForm, {\n        onSubmit: this.processForm,\n        onChange: this.changeUser,\n        errors: this.state.errors,\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return SignUpPage;\n}(React.Component); // SignUpPage.contextTypes = {\n//   router: PropTypes.object.isRequired\n// };\n\n\nexport default SignUpPage;","map":{"version":3,"sources":["/Users/z/Desktop/AMPY/client/src/pages/SignUpPage.jsx"],"names":["React","PropTypes","SignUpForm","API","SignUpPage","state","errors","user","email","name","password","processForm","event","preventDefault","signUp","then","res","localStorage","setItem","data","message","props","history","push","setState","catch","response","summary","changeUser","field","target","value","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,GAAP,MAAgB,cAAhB;;IAGMC,U;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,EADH;AAEJC,QAAAA,IAAI,EAAE,EAFF;AAGJC,QAAAA,QAAQ,EAAE;AAHN;AAFA,K;;UAcRC,W,GAAc,UAAAC,KAAK,EAAI;AACrB;AACAA,MAAAA,KAAK,CAACC,cAAN,GAFqB,CAIrB;;AAJqB,6BAKa,MAAKR,KAAL,CAAWE,IALxB;AAAA,UAKbE,IALa,oBAKbA,IALa;AAAA,UAKPD,KALO,oBAKPA,KALO;AAAA,UAKAE,QALA,oBAKAA,QALA,EAOrB;;AACAP,MAAAA,GAAG,CAACW,MAAJ,CAAW;AAACL,QAAAA,IAAI,EAAJA,IAAD;AAAOD,QAAAA,KAAK,EAALA,KAAP;AAAcE,QAAAA,QAAQ,EAARA;AAAd,OAAX,EAAoCK,IAApC,CAAyC,UAAAC,GAAG,EAAI;AAC9C;AACE;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCF,GAAG,CAACG,IAAJ,CAASC,OAAhD,EAH4C,CAK5C;;AACA,cAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;;AACA,cAAKC,QAAL,CAAc;AACZlB,UAAAA,MAAM,EAAE;AADI,SAAd;AAIH,OAXD,EAWGmB,KAXH,CAWS,gBAAkB;AAAA,YAAfC,QAAe,QAAfA,QAAe;AAEvB,YAAMpB,MAAM,GAAGoB,QAAQ,CAACP,IAAT,CAAcb,MAAd,GAAuBoB,QAAQ,CAACP,IAAT,CAAcb,MAArC,GAA8C,EAA7D;AACAA,QAAAA,MAAM,CAACqB,OAAP,GAAiBD,QAAQ,CAACP,IAAT,CAAcC,OAA/B;;AAEA,cAAKI,QAAL,CAAc;AACZlB,UAAAA,MAAM,EAANA;AADY,SAAd;AAGD,OAnBH;AAoBD,K;;UAODsB,U,GAAa,UAAAhB,KAAK,EAAI;AACpB,UAAMiB,KAAK,GAAGjB,KAAK,CAACkB,MAAN,CAAarB,IAA3B;AACA,UAAMF,IAAI,GAAG,MAAKF,KAAL,CAAWE,IAAxB;AACAA,MAAAA,IAAI,CAACsB,KAAD,CAAJ,GAAcjB,KAAK,CAACkB,MAAN,CAAaC,KAA3B;;AAEA,YAAKP,QAAL,CAAc;AACZjB,QAAAA,IAAI,EAAJA;AADY,OAAd;AAGD,K;;;;;;;;AAED;;;6BAGS;AACP,aACE,oBAAC,UAAD;AACE,QAAA,QAAQ,EAAE,KAAKI,WADjB;AAEE,QAAA,QAAQ,EAAE,KAAKiB,UAFjB;AAGE,QAAA,MAAM,EAAE,KAAKvB,KAAL,CAAWC,MAHrB;AAIE,QAAA,IAAI,EAAE,KAAKD,KAAL,CAAWE,IAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAQD;;;;EAzEsBP,KAAK,CAACgC,S,GA6E/B;AACA;AACA;;;AAEA,eAAe5B,UAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport SignUpForm from '../components/SignUpForm.jsx';\nimport API from '../utils/API';\n\n\nclass SignUpPage extends React.Component {\n  // set the initial component state\n  state = {\n    errors: {},\n    user: {\n      email: '',\n      name: '',\n      password: ''\n    }\n  }\n\n  /**\n   * Process the form.\n   *\n   * @param {object} event - the JavaScript event object\n   */\n  processForm = event => {\n    // prevent default action. in this case, action is the form submission event\n    event.preventDefault();\n    \n    // create a string for an HTTP body message\n    const { name, email, password } = this.state.user;\n\n    //const formData = `email=${email}&password=${password}`;\n    API.signUp({name, email, password}).then(res => {\n      // change the component-container state\n        // set a message\n        localStorage.setItem('successMessage', res.data.message);\n\n        // redirect user after sign up to login page\n        this.props.history.push('/login');\n        this.setState({\n          errors: {}\n        });\n\n    }).catch(( {response} ) => {\n\n        const errors = response.data.errors ? response.data.errors : {};\n        errors.summary = response.data.message;\n\n        this.setState({\n          errors\n        });\n      });\n  }\n\n  /**\n   * Change the user object.\n   *\n   * @param {object} event - the JavaScript event object\n   */\n  changeUser = event => {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n\n    this.setState({\n      user\n    });\n  }\n\n  /**\n   * Render the component.\n   */\n  render() {\n    return (\n      <SignUpForm\n        onSubmit={this.processForm}\n        onChange={this.changeUser}\n        errors={this.state.errors}\n        user={this.state.user}\n      />\n    );\n  }\n\n}\n\n// SignUpPage.contextTypes = {\n//   router: PropTypes.object.isRequired\n// };\n\nexport default SignUpPage;"]},"metadata":{},"sourceType":"module"}